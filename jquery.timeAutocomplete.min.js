!function(){"use strict";var c,o,e,s,m;c=jQuery,e=(o="timeAutocomplete")+".time",(s=function(){this.initialize.apply(this,arguments)}).prototype={el:null,_formatter:null,_calling_from_init:!1,default_opts:{auto_complete:{delay:0,autoFocus:!0,minLength:0},auto_value:!0,value:"",formatter:"ampm"},initialize:function(t,e){this.options=c.extend(!0,{},this.default_opts,e),void 0!==c.timeAutocompleteDefaults&&(this.options=c.extend(!0,{},this.options,c.timeAutocompleteDefaults)),this.el=t},_callAutocomplete:function(){if(this.options.auto_complete.source=this._callFormatterMethod("filterSource",[this.el],function(t,e){throw new Error("You must set a hook_filterSource method in your formatter.")}),void 0===c.fn.autocomplete)throw new Error("You need to include the jQuery UI bundle that has the Autocomplete plugin.");this.el.autocomplete(this.options.auto_complete)},_bindEvents:function(){var e=this,i=!0;c("body").on("click."+o,"ul.ui-autocomplete a",function(){i=!1,setTimeout(function(){i=!0},100)}),this.el.bind("keydown."+o,function(t){e._keydownAutocomplete.apply(e,arguments)}).bind("keyup."+o,function(t){e._keyupAutocomplete.apply(e,arguments)}).bind("blur."+o,function(t){e._blurAutocomplete.apply(e,arguments)}).bind("focus."+o,function(t){i&&e._focusAutocomplete.apply(e,arguments)}),this.options.auto_value&&this.el.trigger("blur."+o)},_setupPlaceholder:function(){void 0===this.el.attr("placeholder")&&this.el.attr("placeholder",this._callFormatterMethod("placeholderValue",[],""))},_focusAutocomplete:function(){var t=c.trim(this.el.val()).substr(0,2);this.el.data("uiAutocomplete")&&this.el.autocomplete("search",t)},_keydownAutocomplete:function(t){var e=c.trim(this.el.val());if(!~c.inArray(t.which,[8,9,13,38,40])&&(8==t.which||1<e.length&&!~e.indexOf("h")&&!~e.indexOf(":")&&c.isNumeric(e)))try{this.el.autocomplete("close").autocomplete("disable")}catch(t){}},_keyupAutocomplete:function(t){""==c.trim(this.el.val())&&this.el.data("uiAutocomplete")&&this.el.autocomplete("enable")},_blurAutocomplete:function(t){var e=c.trim(this.el.val()),i="";i=(e=this._callFormatterMethod("blur",[e],e))?this._createStringFromFormat(this._readMind(e)):this._callFormatterMethod("blurEmpty",[e],e),this.el.val(i),this._attacheUsableTimeData()},_attacheUsableTimeData:function(){var t=c.trim(this.el.val());this.el.data(e,this._callFormatterMethod("getUsableTimeValue",[t]))},setFormatter:function(t){if(this.options.formatter=t||this.options.formatter,!c.timeAutocomplete.formatters[this.options.formatter])throw new Error("Formatter: '"+t+"' was not found. Make sure you're loading it (formatters/"+this.options.formatter+".js) after you load src/TimeAutocomplete.js");this._formatter=new c.timeAutocomplete.formatters[this.options.formatter](this,this.options),this._calling_from_init||this._callAutocomplete(),this._calling_from_init=!1},getFormatter:function(){return this._formatter},getTime:function(){return this.el.data(e)||""},_callFormatterMethod:function(t,e,i){var o=this.getFormatter();return c.isFunction(o["hook_"+t])?o["hook_"+t].apply(o,e):i},_readMind:function(t){return this._callFormatterMethod("readMind",[t],t)},_createStringFromFormat:function(t){var e=""+t.h+t.sep+t.m;return t.postfix&&(e+=t.postfix),e},_setValueAsTime:function(){var t=c.trim(this.el.val()),e=t.split(":");if(""==t&&this.options.value)this.setTime(this.options.value);else if(3==e.length&&this.isNumber(e[0])&&this.isNumber(e[1])&&this.isNumber(e[2]))this.setTime(t);else{var i=this._getCurrentTimeAsValue();this.el.val(i),this._attacheUsableTimeData()}},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},setTime:function(t){var e=t.replace(/[^0-9.]/g,"").match(/^[0-9]+$/);if(!e||!e.length||5!=e[0].length&&6!=e[0].length)throw new Error("Setting a time must be in H:i:s format. Example: 03:30:00");var i=this._callFormatterMethod("getTimeObjectFromHis",[t]);i=this._createStringFromFormat(i),this.el.val(i),this._attacheUsableTimeData()},_getCurrentTimeAsValue:function(){for(var t=this.getFormatter(),e=[1987,1,17],i=this._getCurrentDate(),o=i.getHours(),s=i.getMinutes(),n=new Date(e[0],e[1],e[2],o,s).getTime(),r=t.options.times.slice().concat(t.options.times),a=[],p=0,h=r.length;p<h;p++){var m=this._callFormatterMethod("getTime",[r[p],e]),l=!!r[p+1]&&this._callFormatterMethod("getTime",[r[p+1],e]),u=!(-1===c.inArray(l,a));if(a.push(l),m<n&&(l&&n<=l||u))return r[p+1]}},_getCurrentDate:function(){return new Date},destroy:function(){this.el.removeData(o),this.el.removeData(e),this.el.unbind("."+o),this.el.data("uiAutocomplete")&&this.el.autocomplete("destroy")},render:function(){return this._calling_from_init=!0,this.setFormatter(),this._callAutocomplete(),this.options.auto_value&&this._setValueAsTime(),this._bindEvents(),this._setupPlaceholder(),this}},c.timeAutocomplete={formatters:{},_raw:s},c.fn.timeAutocomplete=function(i){return this.each(function(){var t=c(this);t.data(o)&&t.data(o).destroy();var e=new s(t,i).render();t.data(o,e)})},(m=jQuery).timeAutocomplete.formatters["24hr"]=function(){this.initialize.apply(this,arguments)},m.timeAutocomplete.formatters["24hr"].prototype={main_instance:null,options:{},default_opts:{increment:15,start_hour:"00",hour_max:24,blur_empty_populate:!0,times:[],empty:{h:"12",m:"00",sep:":",postfix:""}},initialize:function(t,e){this.main_instance=t,this.options=m.extend(!0,{},this.default_opts,e),this.generateTimes()},hook_placeholderValue:function(){return this.main_instance._createStringFromFormat(this.options.empty)},hook_getTime:function(t,e){var i=t.split(this.options.empty.sep),o=i[0],s=i[1];return new Date(e[0],e[1],e[2],o,s).getTime()},hook_getTimeObjectFromHis:function(t){var e=t.split(":");return{h:e[0],m:e[1],sep:this.options.empty.sep}},hook_filterSource:function(a){var p,h;return a=a[0],p=this.options.times,h=this,function(t,e){var i=m.trim(a.value);1==t.term.length&&t.term.substr(0,1)<10&&(t.term="0"+t.term);var o=m.ui.autocomplete.escapeRegex(t.term),s=new RegExp("^"+o,"i"),n=[];i&&(n=m.grep(p,function(t){return 0==t.substr(0,1)&&1==t.length&&(t=t.substr(1)),s.test(t)})),e(n);var r=i.toLowerCase();!n.length&&5<r.length&&h.main_instance.el.val(r.substr(0,5))}},hook_blurEmpty:function(){return this.options.blur_empty_populate?this.main_instance._createStringFromFormat(this.options.empty):""},hook_readMind:function(t){return t=t.toLowerCase(),this.getTimeObject(t)},hook_getUsableTimeValue:function(t){return t+":00"},getTimeObject:function(t){var e="",i="";if(~t.indexOf("h")){var o=t.split("h");e=o[0]?o[0]:this.options.empty.h,i=o[1]?o[1]:this.options.empty.m}else{var s=t.replace(/[^\d]/g,"");4==(s=s.split("")).length?(e=s[0]+s[1],i=s[2]+s[3]):3==s.length?(e="0"+s[0],i=s[1]+s[2]):2==s.length?(e=s.join(""),i="00"):1==s.length&&(e=s.join(""),i="00")}return 24<e&&"00"==i&&(i=(e=e.split(""))[1]+"0",e="0"+e[0]),1==e.length&&(e="0"+e),1==i.length&&(i+="0"),e||i?{h:e,m:i,sep:this.options.empty.sep}:this.options.empty},generateTimes:function(){if(!this.options.times.length){for(var t=this.options.increment,e=new Date(2012,1,1,this.options.start_hour-1,60-t),i=[],o=0,s=this.options.hour_max*(60/t);o<s;o++){e.setMinutes(e.getMinutes()+t);var n=e.getHours(),r=e.getMinutes();1==(""+n).length&&(n="0"+n),1==(""+r).length&&(r="0"+r);var a=n+this.options.empty.sep+r;i.push(a)}this.options.times=i}}};var f,t,h={from_selector:"",increment:15,start_hour:0,end_hour:24,pm_text:"PM",am_text:"AM",blur_empty_populate:!0,times:[],empty:{h:"12",m:"00",sep:":",postfix:" PM"}};(f=jQuery).timeAutocomplete.formatters.ampm=function(){this.initialize.apply(this,arguments)},f.timeAutocomplete.formatters.ampm.prototype={main_instance:null,options:{},default_opts:{from_selector:"",increment:15,start_hour:0,end_hour:24,pm_text:"PM",am_text:"AM",blur_empty_populate:!0,times:[],empty:{h:"12",m:"00",sep:":",postfix:" PM"}},initialize:function(t,e){this.main_instance=t,this.options=f.extend(!0,{},this.default_opts,e),this.generateTimes()},hook_placeholderValue:function(){return this.main_instance._createStringFromFormat(this.options.empty)},hook_filterSource:function(m){var l,u;return m=m[0],l=this.options.times,u=this,function(t,e){var i=f.trim(m.value),o=f.ui.autocomplete.escapeRegex(t.term),s=~o.toLowerCase().indexOf("a"),n=~o.toLowerCase().indexOf("p"),r="",a=!(1!=i);(s||n)&&o.replace(/a|m|p/gi,"").length<=2&&(o=f.trim(o.replace(/a|m|p/gi,""))+":00 ",o+=s?u.options.am_text:u.options.pm_text),u.options.from_selector&&(r=u.detectAMPMFromInstanceOverlap()==u.options.am_text?u.options.pm_text:u.options.am_text);var p=new RegExp("^"+o,"i"),h=[];i&&(h=f.grep(l,function(t){if(!(r&&new RegExp(r,"gi").test(t)||a&&"1:"!=t.substring(0,2)||~i.toLowerCase().indexOf("p")&&!~t.toLowerCase().indexOf("p")||~i.toLowerCase().indexOf("a")&&!~t.toLowerCase().indexOf("a")))return p.test(t)})),e(h)}},hook_blur:function(t){return 0==t.charAt(0)&&(t=t.substr(1)),t},hook_blurEmpty:function(){return this.options.blur_empty_populate?this.main_instance._createStringFromFormat(this.options.empty):""},hook_readMind:function(t){var e="";return t=t.toLowerCase(),!this.options.from_selector||~t.indexOf("a")||~t.indexOf("p")||(e=this.detectAMPMFromInstanceOverlap()),this.getTimeObject(t,e)},hook_getUsableTimeValue:function(t){return this.parseTime(t)},hook_getTime:function(t,e){var i=this.parseTime(t).split(this.options.empty.sep),o=i[0],s=i[1];return new Date(e[0],e[1],e[2],o,s).getTime()},hook_getTimeObjectFromHis:function(t){var e=t.split(":"),i=e[0],o=e[1],s=12<=i?this.options.pm_text:this.options.am_text;return 2==i.length&&parseInt(i,10)<10&&(i=i.substr(1)),12<i&&(i-=12),0==i&&(i=12),{h:parseInt(i,10),m:o,sep:this.options.empty.sep,postfix:" "+s}},detectAMPMFromInstanceOverlap:function(){var t="",e=this.getTimeObject(f(this.options.from_selector).val()),i=this.getTimeObject(f.trim(this.main_instance.el.val()));if(e.postfix&&(~e.postfix.toLowerCase().indexOf("a")||~e.postfix.toLowerCase().indexOf("p"))){var o=~e.postfix.toLowerCase().indexOf("a")?this.options.am_text:this.options.pm_text,s=i.h,n=e.h;t=12==n&&12!=s?o==this.options.am_text?this.options.am_text:this.options.pm_text:12==s&&12!=n?o==this.options.am_text?this.options.pm_text:this.options.am_text:s<n?o==this.options.am_text?this.options.pm_text:this.options.am_text:o==this.options.am_text?this.options.am_text:this.options.pm_text}return t},getTimeObject:function(t,e){var i=this.parseTime(t,"g:i:A").split(":"),o=i[0],s=i[1];return o||s?{h:o,m:s,sep:":",postfix:" "+(e||i[2])}:this.options.empty},generateTimes:function(){if(!this.options.times.length){var t=this.options.increment,e=new Date(2012,1,1,this.options.start_hour-1,60-t),i=[],o=this.options.end_hour-this.options.start_hour,s=!1;24==o&&(s=!0);for(var n=0,r=o*(60/t);n<=r;n++){e.setMinutes(e.getMinutes()+t);var a=e.getHours(),p=e.getMinutes(),h=11<a?this.options.pm_text:this.options.am_text;0==a&&(a=12),12<a&&(a-=12),1==(""+p).length&&(p="0"+p);var m=a+":"+p+" "+h;i.push(m)}s&&i.pop(),this.options.times=i}},parseTime:function(t,e){return function(t,e){var i,o,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,n=(e=e||"H:i:s",null!==t.match(/p/i)),r=null!==t.match(/a/i),a=t.replace(/[^0-9]/g,"");switch(a.length){case 4:i=parseInt(a.charAt(0)+a.charAt(1),10),o=parseInt(a.charAt(2)+a.charAt(3),10);break;case 3:i=parseInt(a.charAt(0),10),o=parseInt(a.charAt(1)+a.charAt(2),10);break;case 2:case 1:i=parseInt(a.charAt(0)+(a.charAt(1)||""),10),o=0;break;default:return""}if(12==i&&!1===n&&!1===r?(i=12,n=!0):12==i&&!1===n?i=0:!0===n&&0<i&&i<12&&(i+=12),i<=0&&(i=0),24<=i&&2==(""+i).length){var p=(""+i).split("");i=parseInt(p[0],10),(o=parseInt(p[1],10))<6&&(o+="0")}return(o<0||59<o)&&(o=0),13<=i&&i<=23&&(n=!0),e.replace(/g/g,0===i?"12":"g").replace(/g/g,12<i?i-12:i).replace(/h/g,1<i.toString().length?12<i?i-12:i:"0"+(12<i?i-12:i)).replace(/H/g,1<i.toString().length?i:"0"+i).replace(/i/g,1<o.toString().length?o:"0"+o).replace(/s/g,"00").replace(/A/g,n?s.pm_text:s.am_text)}(t,e,this.options)}},(t=jQuery).timeAutocomplete.formatters.french=function(){this.initialize.apply(this,arguments)},t.timeAutocomplete.formatters.french.prototype=t.extend(!0,{},t.timeAutocomplete.formatters["24hr"].prototype,{default_opts:{empty:{sep:"h"}},hook_getUsableTimeValue:function(t){return t.replace(this.options.empty.sep,":")+":00"}})}();
